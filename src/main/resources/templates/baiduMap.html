<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"/>
    <style type="text/css">
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            font-family: "微软雅黑";
        }

        #allmap {
            width: 100%;
            height: 500px;
        }
    </style>
    <script type="text/javascript"
            src="http://api.map.baidu.com/api?v=2.0&ak=c8pxdqacdLlTFPQwOX6npKvKYsAt1euG"></script>
    <title>从多个点删除指定点</title>
</head>
<body>
<div id="allmap"></div>
<input type="button" onclick="deletePoint()" value="删除id=1"/>
<div id="r-result">
    <input type="button" onclick="add_overlay();" value="添加覆盖物" />
    <input type="button" onclick="remove_overlay();" value="删除覆盖物" />
</div>
</body>
</html>
<script type="text/javascript">
//    // 复杂的自定义覆盖物
//    function ComplexCustomOverlay(point, text, mouseoverText){
//        this._point = point;
//        this._text = text;
//        this._overText = mouseoverText;
//    }
//    ComplexCustomOverlay.prototype = new BMap.Overlay();
//    ComplexCustomOverlay.prototype.initialize = function(map){
//        this._map = map;
//        var div = this._div = document.createElement("div");
//        div.style.position = "absolute";
//        div.style.zIndex = BMap.Overlay.getZIndex(this._point.lat);
//        div.style.backgroundColor = "#EE5D5B";
//        div.style.border = "1px solid #BC3B3A";
//        div.style.color = "white";
//        div.style.height = "40px";
//        div.style.padding = "2px";
//        div.style.lineHeight = "18px";
//        div.style.whiteSpace = "nowrap";
//        div.style.MozUserSelect = "none";
//        div.style.fontSize = "12px";
//        var span = this._span = document.createElement("span");
//        div.appendChild(span);
//        span.appendChild(document.createTextNode(this._text));
//        var that = this;
//        var button = this.button = document.createElement("button");
//        button.style.width = "20px";
//        button.style.height = "50px";
//        button.text = "123";
//        var _this = this;
//        button.onclick = function(){
//            alert(_this.job_no);
//        };
//        div.appendChild(button);
//        var arrow = this._arrow = document.createElement("div");
//        arrow.style.background = "url(http://map.baidu.com/fwmap/upload/r/map/fwmap/static/house/images/label.png) no-repeat";
//        arrow.style.position = "absolute";
//        arrow.style.width = "11px";
//        arrow.style.height = "10px";
//        arrow.style.top = "22px";
//        arrow.style.left = "10px";
//        arrow.style.overflow = "hidden";
//        div.appendChild(arrow);
//
////        div.onmouseover = function(){
////            this.style.backgroundColor = "#6BADCA";
////            this.style.borderColor = "#0000ff";
////            this.getElementsByTagName("span")[0].innerHTML = that._overText;
////            arrow.style.backgroundPosition = "0px -20px";
////        }
//
//        div.onmouseout = function(){
//            this.style.backgroundColor = "#EE5D5B";
//            this.style.borderColor = "#BC3B3A";
//            this.getElementsByTagName("span")[0].innerHTML = that._text;
//            arrow.style.backgroundPosition = "0px 0px";
//        }
//        map.getPanes().labelPane.appendChild(div);
//        this._div = div;
//        return div;
//    }
//    ComplexCustomOverlay.prototype.draw = function(){
//        var map = this._map;
//        var pixel = map.pointToOverlayPixel(this._point);
//        this._div.style.left = pixel.x - parseInt(this._arrow.style.left) + "px";
//        this._div.style.top  = pixel.y - 30 + "px";
//    }
//
//    // 百度地图API功能
//    var map = new BMap.Map("allmap");
//    var point = new BMap.Point(116.404, 39.915);
//    map.centerAndZoom(point, 15);
//    map.disableDoubleClickZoom(false);
////    map.enableScrollWheelZoom();
////    var mp = new BMap.Map("allmap");
////    mp.centerAndZoom(new BMap.Point(116.3964,39.9093), 15);
////    mp.enableScrollWheelZoom();
//
//    // 编写自定义函数,创建标注
//    function addMarker(point, label) {
//        var marker = new BMap.Marker(point);
//        map.addOverlay(marker);
//        marker.setLabel(label);
//    }
//    function addAttribute(point, value) {
//        var marker = new BMap.Marker(point);
//        marker.setTitle(value)
//    }
//    // 随机向地图添加25个标注
//    var bounds = map.getBounds();
//    var sw = bounds.getSouthWest();
//    var ne = bounds.getNorthEast();
//    var lngSpan = Math.abs(sw.lng - ne.lng);
//    var latSpan = Math.abs(ne.lat - sw.lat);
//    for (var i = 0; i < 25; i++) {
//        var point = new BMap.Point(sw.lng + lngSpan * (Math.random() * 0.7), ne.lat - latSpan * (Math.random() * 0.7));
//        var label = new BMap.Label("我是id=" + i, {offset: new BMap.Size(20, -10)});
//        label.job_no = i;
//        addMarker(point, label);
//        addAttribute(point, i);
//        var txt = "银湖海岸城", mouseoverTxt = txt + " " + parseInt(Math.random() * 1000,10) + "套" ;
//        var myCompOverlay = new ComplexCustomOverlay(point, "银湖海岸城",mouseoverTxt);
//        myCompOverlay.job_no = i;
//        map.addOverlay(myCompOverlay);
//        setTimeout(function () {
//            document.getElementById("btn").onclick = function(){
//                alert(213);
//            };
//        },100);
//    }
//    var p = new BMap.Point(sw.lng + lngSpan * (1 * 0.7), ne.lat - latSpan * (1 * 0.7));
//    var label = new BMap.Label("test111111111", {offset: new BMap.Size(20, -10)});
//    var marker = new BMap.Marker(p);
//    map.addOverlay(marker);
//    marker.setLabel(label);
//
//    function deletePoint() {
//        var allOverlay = map.getOverlays();//Marker对象集合
//        for (var i = 0; i < allOverlay.length - 1; i++) {
//            if (allOverlay[i].getLabel().job_no == 1) {
//                alert(allOverlay[i].getTitle())
//                map.removeOverlay(allOverlay[i]);
//                return false;
//            }
//        }
//    }
//
//    function update() {
//        p.lng = sw.lng + lngSpan * (Math.random() * 0.7);
//        p.lat = ne.lat - latSpan * (Math.random() * 0.7);
//
////        map.removeOverlay(map.getOverlays()[25]);
////        var label = new BMap.Label("test22222222222", {offset: new BMap.Size(20, -10)});
////        addMarker(p,label);
//        marker.setPosition(p);
//        alert(1)
//    }
//
//    setTimeout(function () {
//        update()
//    }, 5000);





// 百度地图API功能
//map = new BMap.Map("allmap");
//map.centerAndZoom(new BMap.Point(116.417854,39.921988), 15);
//var data_info = [
//                    [116.417854,39.921988,"<button id = 'btn'>123</button>"],
//                    [116.406605,39.921585,"<button id = 'btn'>123</button>"],
//                    [116.412222,39.912345,"<button id = 'btn'>123</button>"]
//                ];
//var opts = {
//    width : 250,     // 信息窗口宽度
//    height: 80,     // 信息窗口高度
//    title : "信息窗口" , // 信息窗口标题
//    enableMessage:true//设置允许信息窗发送短息
//};
//for(var i=0;i<data_info.length;i++){
//    var marker = new BMap.Marker(new BMap.Point(data_info[i][0],data_info[i][1]));  // 创建标注
//    var content = data_info[i][2];
//    map.addOverlay(marker);               // 将标注添加到地图中
//    addClickHandler(content,marker);
//}
//function addClickHandler(content,marker){
//    marker.addEventListener("click",function(e){
//        openInfo(content,e);
//        document.getElementById("btn").onclick = function(){
//            alert(213);
//        };
//    });
//}
//function openInfo(content,e){
//    var p = e.target;
//    var point = new BMap.Point(p.getPosition().lng, p.getPosition().lat);
//    var infoWindow = new BMap.InfoWindow(content,opts);  // 创建信息窗口对象
//    map.openInfoWindow(infoWindow,point); //开启信息窗口
//    setTimeout(function () {
//    },1);
//}



// 百度地图API功能
var map = new BMap.Map("allmap");
var point = new BMap.Point(116.404, 39.915);
map.centerAndZoom(point, 15);
var point = new BMap.Point(116.404, 39.915);
var marker = new BMap.Marker(point); // 创建点
var polyline = new BMap.Polyline([
    new BMap.Point(116.399, 39.910),
    new BMap.Point(116.405, 39.920),
    new BMap.Point(116.425, 39.900)
], {strokeColor:"blue", strokeWeight:2, strokeOpacity:0.5});   //创建折线

var circle = new BMap.Circle(point,500,{strokeColor:"blue", strokeWeight:2, strokeOpacity:0.5}); //创建圆

var polygon = new BMap.Polygon([
    new BMap.Point(116.387112,39.920977),
    new BMap.Point(116.385243,39.913063),
    new BMap.Point(116.394226,39.917988),
    new BMap.Point(116.401772,39.921364),
    new BMap.Point(116.41248,39.927893)
], {strokeColor:"blue", strokeWeight:2, strokeOpacity:0.5});  //创建多边形

var pStart = new BMap.Point(116.392214,39.918985);
var pEnd = new BMap.Point(116.41478,39.911901);
var rectangle = new BMap.Polygon([
    new BMap.Point(pStart.lng,pStart.lat),
    new BMap.Point(pEnd.lng,pStart.lat),
    new BMap.Point(pEnd.lng,pEnd.lat),
    new BMap.Point(pStart.lng,pEnd.lat)
], {strokeColor:"blue", strokeWeight:2, strokeOpacity:0.5});  //创建矩形

//添加覆盖物
function add_overlay(){
    map.addOverlay(marker);            //增加点
    map.addOverlay(polyline);          //增加折线
    map.addOverlay(circle);            //增加圆
    map.addOverlay(polygon);           //增加多边形
    map.addOverlay(rectangle);         //增加矩形
    setTimeout(function () {

    },1000);
}
//清除覆盖物
function remove_overlay(){
    map.clearOverlays();
}
</script>
